{{!-- views/partials/alert-settings.hbs --}}
{{!-- <h2 class="text-2xl font-bold mb-4">Alert Settings</h2>

{{#if message}}
  <div class="mb-4 p-3 rounded {{#if message.[0].error}}bg-red-100 text-red-800{{else}}bg-green-100 text-green-800{{/if}}">
    {{message.[0].text}}
  </div>
{{/if}}

<form action="/settings/alert-settings" method="POST" class="space-y-6">

  <!-- AQI -->
  <fieldset class="border border-gray-300 rounded-lg p-4">
    <legend class="font-semibold">AQI Alerts</legend>
    <label class="inline-flex items-center mt-2">
      <input
        type="checkbox"
        name="aqiOn"
        value="true"
        class="form-checkbox h-5 w-5 text-blue-600"
        {{#if alertSettings.aqiOn}}checked{{/if}}>
      <span class="ml-2">Enable AQI Alerts</span>
    </label>
    <div class="mt-3">
      <label for="aqiLevel" class="block mb-1">AQI Level Threshold</label>
      <input
        id="aqiLevel"
        name="aqiLevel"
        type="number"
        placeholder="e.g. 100"
        class="w-full border rounded p-2 bg-gray-50 focus:outline-none focus:ring"
        value="{{alertSettings.aqiLevel}}">
    </div>
  </fieldset>

  <!-- Wind -->
  <fieldset class="border border-gray-300 rounded-lg p-4">
    <legend class="font-semibold">Wind Speed Alerts</legend>
    <label class="inline-flex items-center mt-2">
      <input
        type="checkbox"
        name="windOn"
        value="true"
        class="form-checkbox h-5 w-5 text-blue-600"
        {{#if alertSettings.windOn}}checked{{/if}}>
      <span class="ml-2">Enable Wind Alerts</span>
    </label>
    <div class="mt-3">
      <label for="windSpeed" class="block mb-1">Wind Speed Threshold (mph)</label>
      <input
        id="windSpeed"
        name="windSpeed"
        type="number"
        placeholder="e.g. 20"
        class="w-full border rounded p-2 bg-gray-50 focus:outline-none focus:ring"
        value="{{alertSettings.windSpeed}}">
    </div>
  </fieldset>

  <!-- Temperature -->
  <fieldset class="border border-gray-300 rounded-lg p-4">
    <legend class="font-semibold">Temperature Alerts</legend>
    <label class="inline-flex items-center mt-2">
      <input
        type="checkbox"
        name="tempOn"
        value="true"
        class="form-checkbox h-5 w-5 text-blue-600"
        {{#if alertSettings.tempOn}}checked{{/if}}>
      <span class="ml-2">Enable Temperature Alerts</span>
    </label>
    <div class="mt-3 grid grid-cols-2 gap-4">
      <div>
        <label for="hotTemp" class="block mb-1">High Temp (°F)</label>
        <input
          id="hotTemp"
          name="hotTemp"
          type="number"
          placeholder="e.g. 90"
          class="w-full border rounded p-2 bg-gray-50 focus:outline-none focus:ring"
          value="{{alertSettings.hotTemp}}">
      </div>
      <div>
        <label for="coldTemp" class="block mb-1">Low Temp (°F)</label>
        <input
          id="coldTemp"
          name="coldTemp"
          type="number"
          placeholder="e.g. 32"
          class="w-full border rounded p-2 bg-gray-50 focus:outline-none focus:ring"
          value="{{alertSettings.coldTemp}}">
      </div>
    </div>
  </fieldset>

  <button
    type="submit"
    class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700">
    Save Alert Settings
  </button>
</form>

<script>
  // on load & whenever you tick/untick, enable or disable the number-fields
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('fieldset').forEach(fset => {
      const chk = fset.querySelector('input[type="checkbox"]');
      const nums = fset.querySelectorAll('input[type="number"]');
      const toggle = () => nums.forEach(n => n.disabled = !chk.checked);
      chk.addEventListener('change', toggle);
      toggle();
    });
  });
</script> --}}

{{!-- views/partials/alert-settings.hbs --}}
<h2 class="text-2xl font-bold mb-4">Alert Settings</h2>

{{#if message}}
  <div class="mb-4 p-3 rounded {{#if message.[0].error}}bg-red-100 text-red-800{{else}}bg-green-100 text-green-800{{/if}}">
    {{message.[0].text}}
  </div>
{{/if}}

<form action="/settings/alert-settings" method="POST" class="space-y-6">

  <!-- AQI -->
  <fieldset class="border border-gray-300 rounded-lg p-4">
    <legend class="font-semibold">AQI Alerts</legend>
    <label class="inline-flex items-center mt-2">
      <input
        type="checkbox"
        name="aqiOn"
        value="true"
        class="form-checkbox h-5 w-5 text-green-600"
        {{#if alertSettings.aqiOn}}checked{{/if}}>
      <span class="ml-2">Enable AQI Alerts</span>
    </label>
    <div class="mt-3">
      <label for="aqiLevel" class="block mb-1">AQI Level</label>
      <select
        id="aqiLevel"
        name="aqiLevel"
        class="w-full border rounded p-2 bg-gray-50 focus:outline-none focus:ring"
        {{#unless alertSettings.aqiOn}}disabled{{/unless}}>
        <option value="">Select AQI…</option>
        <option value="1" {{#if (eq alertSettings.aqiLevel 1)}}selected{{/if}}>1 – Good</option>
        <option value="2" {{#if (eq alertSettings.aqiLevel 2)}}selected{{/if}}>2 – Moderate</option>
        <option value="3" {{#if (eq alertSettings.aqiLevel 3)}}selected{{/if}}>3 – Unhealthy (Sensitive)</option>
        <option value="4" {{#if (eq alertSettings.aqiLevel 4)}}selected{{/if}}>4 – Unhealthy</option>
        <option value="5" {{#if (eq alertSettings.aqiLevel 5)}}selected{{/if}}>5 – Very Unhealthy</option>
      </select>
    </div>
  </fieldset>

  <!-- Wind Speed -->
  <fieldset class="border border-gray-300 rounded-lg p-4">
    <legend class="font-semibold">Wind Speed Alerts</legend>
    <label class="inline-flex items-center mt-2">
      <input
        type="checkbox"
        name="windOn"
        value="true"
        class="form-checkbox h-5 w-5 text-green-600"
        {{#if alertSettings.windOn}}checked{{/if}}>
      <span class="ml-2">Enable Wind Alerts</span>
    </label>
    <div class="mt-3">
      <label for="windSpeed" class="block mb-1">Wind Speed Threshold (mph)</label>
      <input
        id="windSpeed"
        name="windSpeed"
        type="number"
        placeholder="e.g. 20"
        class="w-full border rounded p-2 bg-gray-50 focus:outline-none focus:ring"
        value="{{alertSettings.windSpeed}}">
    </div>
  </fieldset>

  <!-- Temperature -->
  <fieldset class="border border-gray-300 rounded-lg p-4">
    <legend class="font-semibold">Temperature Alerts</legend>
    <label class="inline-flex items-center mt-2">
      <input
        type="checkbox"
        name="tempOn"
        value="true"
        class="form-checkbox h-5 w-5 text-green-600"
        {{#if alertSettings.tempOn}}checked{{/if}}>
      <span class="ml-2">Enable Temperature Alerts</span>
    </label>
    <div class="mt-3 grid grid-cols-2 gap-4">
      <div>
        <label for="hotTemp" class="block mb-1">High Temp (°F)</label>
        <input
          id="hotTemp"
          name="hotTemp"
          type="number"
          placeholder="e.g. 90"
          class="w-full border rounded p-2 bg-gray-50 focus:outline-none focus:ring"
          value="{{alertSettings.hotTemp}}">
      </div>
      <div>
        <label for="coldTemp" class="block mb-1">Low Temp (°F)</label>
        <input
          id="coldTemp"
          name="coldTemp"
          type="number"
          placeholder="e.g. 32"
          class="w-full border rounded p-2 bg-gray-50 focus:outline-none focus:ring"
          value="{{alertSettings.coldTemp}}">
      </div>
    </div>
  </fieldset>

  <button
    type="submit"
    class="bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700">
    Save Alert Settings
  </button>
</form>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('fieldset').forEach(fset => {
      const chk  = fset.querySelector('input[type="checkbox"]');
      const inputs = fset.querySelectorAll('input[type="number"], select');
      const toggle = () => inputs.forEach(i => i.disabled = !chk.checked);
      chk.addEventListener('change', toggle);
      toggle();
    });
  });
</script>
